# å®è·µé¢˜1.cpp ä»£ç å®¡æŸ¥ - é”™è¯¯å’Œæ”¹è¿›æ€»ç»“

## æ¦‚è¿°
æœ¬æ–‡æ¡£è¯¦ç»†åˆ—ä¸¾äº† `å®è·µé¢˜1.cpp` ä¸­å‘ç°çš„æ‰€æœ‰ä»£ç è§„èŒƒé—®é¢˜å’Œé”™è¯¯ï¼ŒæŒ‰ç±»åˆ«åˆ†ç»„ã€‚

---

## 1. ç©ºæ ¼è§„èŒƒé—®é¢˜ï¼ˆå‡ºç°4æ¬¡ï¼‰âš ï¸

### é—®é¢˜æè¿°
C++ ä»£ç ä¸­ç¼ºå°‘å¿…è¦çš„ç©ºæ ¼ï¼Œå½±å“å¯è¯»æ€§å’Œéµå¾ªç¼–ç è§„èŒƒã€‚

### å…·ä½“ä½ç½®å’Œä¿®æ­£

| åŸå½¢å¼ | é—®é¢˜ | ä¿®æ­£å½¢å¼ |
|--------|------|--------|
| `friend std::ostream &operator <<` | `&` ä¸ç±»å‹åˆ†ç¦»ï¼Œæ“ä½œç¬¦å‰æœ‰ç©ºæ ¼ | `friend std::ostream& operator<<` |
| `if(this!=&dress)` | `if` åæ— ç©ºæ ¼ï¼Œ`!=` ä¸¤è¾¹æ— ç©ºæ ¼ | `if (this != &dress)` |
| `Account_number=dress.Account_number` | `=` ä¸¤è¾¹æ— ç©ºæ ¼ | `Account_number = dress.Account_number` |
| `os<<acc.Account_number` | `<<` ä¸¤è¾¹æ— ç©ºæ ¼ | `os << acc.Account_number` |

### C++ é£æ ¼è§„èŒƒ
- **å…³é”®å­—å**åº”æœ‰ç©ºæ ¼ï¼š`if (`, `while (`, `for (`
- **äºŒå…ƒè¿ç®—ç¬¦ä¸¤è¾¹**åº”æœ‰ç©ºæ ¼ï¼š`=`, `==`, `!=`, `+`, `-`, `<<`, `>>`
- **æŒ‡é’ˆ/å¼•ç”¨ç¬¦å·**åº”ä¸ç±»å‹ç›¸è¿ï¼š`int* ptr` æˆ– `const string&`ï¼Œè€Œé `int *ptr` æˆ– `const string &`

---

## 2. å†—ä½™thisæŒ‡é’ˆé—®é¢˜ï¼ˆå‡ºç°3æ¬¡ï¼‰âš ï¸

### é—®é¢˜æè¿°
åœ¨æˆå‘˜å‡½æ•°å†…ä½¿ç”¨ `this->` è®¿é—®æˆå‘˜å˜é‡ï¼Œä½†æ— éœ€æ˜¾å¼æŒ‡æ˜ã€‚

### å…·ä½“ä½ç½®å’Œä¿®æ­£

| åŸå½¢å¼ | é—®é¢˜ | ä¿®æ­£å½¢å¼ |
|--------|------|---------|
| `this->balance += amount` | å†—ä½™ this æŒ‡é’ˆ | `balance += amount` |
| `this->balance -= amount` | å†—ä½™ this æŒ‡é’ˆ | `balance -= amount` |
| `this->balance < amount` | å†—ä½™ this æŒ‡é’ˆ | `balance < amount` |

### ä½•æ—¶ä½¿ç”¨ this->
âœ… **åº”è¯¥ä½¿ç”¨ this->**
- å­˜åœ¨å‚æ•°ä¸æˆå‘˜å˜é‡åŒåçš„æƒ…å†µ
- æ¨¡æ¿ä»£ç ä¸­éœ€è¦æ˜ç¡®é™å®šä½œç”¨åŸŸ
- è®¿é—®åŸºç±»æˆå‘˜ï¼ˆè™½ç„¶ä¸€èˆ¬ä¸æ¨èï¼‰

âŒ **ä¸åº”è¯¥ä½¿ç”¨ this->**
- æ™®é€šæˆå‘˜å‡½æ•°ä¸­ç›´æ¥è®¿é—®æˆå‘˜å˜é‡ï¼ˆå½“æ— åå­—å†²çªæ—¶ï¼‰

---

## 3. æ„é€ å‡½æ•°å†—ä½™è½¬æ¢é—®é¢˜

### é—®é¢˜ä½ç½®
```cpp
// âŒ åŸå½¢å¼
Account_number(string (acc_num))

// âœ… ä¿®æ­£
Account_number(acc_num)
```

### è¯´æ˜
å‚æ•°å·²æ˜¯ `const string&` ç±»å‹ï¼Œå†ç”¨ `string()` æ„é€ ä¸€æ¬¡æ˜¯æµªè´¹ï¼Œä¼šäº§ç”Ÿä¸´æ—¶å¯¹è±¡ã€‚ç›´æ¥ä¼ å‚å³å¯ã€‚

---

## 4. æ‹·è´æ„é€ å‡½æ•°æ•ˆç‡é—®é¢˜

### é—®é¢˜ä½ç½®
```cpp
// âŒ åŸå½¢å¼ï¼ˆåœ¨å‡½æ•°ä½“ä¸­èµ‹å€¼ï¼‰
Account(const Account &other) {
    Account_number = other.Account_number;
    name = other.name;
    balance = other.balance;
    transaction_history = other.transaction_history;
}

// âœ… ä¿®æ­£ï¼ˆä½¿ç”¨åˆå§‹åŒ–åˆ—è¡¨ï¼‰
Account(const Account &other)
    : Account_number(other.Account_number),
      name(other.name),
      balance(other.balance),
      transaction_history(other.transaction_history) {}
```

### ä¸ºä»€ä¹ˆä½¿ç”¨åˆå§‹åŒ–åˆ—è¡¨æ›´å¥½
- **æ•ˆç‡é«˜**ï¼šæˆå‘˜åœ¨åˆå§‹åŒ–æ—¶ç›´æ¥èµ‹å€¼ï¼Œè€Œå‡½æ•°ä½“èµ‹å€¼ä¼šå…ˆé»˜è®¤åˆå§‹åŒ–å†è¦†ç›–
- **å¿…è¦æ€§**ï¼šconst æˆå‘˜ã€å¼•ç”¨æˆå‘˜ã€æ²¡æœ‰é»˜è®¤æ„é€ çš„æˆå‘˜ **å¿…é¡»** ç”¨åˆå§‹åŒ–åˆ—è¡¨
- **è§„èŒƒæ€§**ï¼šè¿™æ˜¯ C++ æœ€ä½³å®è·µ

---

## 5. èµ‹å€¼è¿ç®—ç¬¦å‚æ•°ä¸æ˜¯consté—®é¢˜

### é—®é¢˜ä½ç½®
```cpp
// âŒ åŸå½¢å¼
Account& operator=(Account &dress) { ... }

// âœ… ä¿®æ­£
Account& operator=(const Account &dress) { ... }
```

### è¯´æ˜
- èµ‹å€¼è¿ç®—ç¬¦çš„å‚æ•°åº”ä¸º `const&`ï¼Œå…è®¸ç”¨ const å¯¹è±¡è¿›è¡Œèµ‹å€¼
- å¦‚ï¼š`Account a1, a2; const Account a3; a1 = a3;` åœ¨åŸå½¢å¼ä¸­ä¼šç¼–è¯‘é”™è¯¯

---

## 6. èµ‹å€¼è¿ç®—ç¬¦ç¼©è¿›é—®é¢˜

### é—®é¢˜ä½ç½®
```cpp
// âŒ åŸå½¢å¼ï¼ˆç¼©è¿›ä¸ä¸€è‡´ï¼‰
if(this!=&dress){
Account_number=dress.Account_number;  // <- åº”è¯¥å¤šç¼©è¿›4ä¸ªç©ºæ ¼
name=dress.name;
...
}

// âœ… ä¿®æ­£
if (this != &dress) {
    Account_number = dress.Account_number;
    name = dress.name;
    ...
}
```

### C++ ç¼©è¿›è§„èŒƒ
- æ¯ä¸ªåµŒå¥—çº§åˆ«ç¼©è¿› 4 ä¸ªç©ºæ ¼
- if å—ã€for å—ã€while å—å†…çš„ä»£ç éƒ½åº”ç¼©è¿›
- ä½¿ç”¨ç©ºæ ¼è€Œä¸æ˜¯ Tabï¼ˆä¿è¯è·¨å¹³å°ä¸€è‡´æ€§ï¼‰

---

## 7. operator<< æ ¼å¼é—®é¢˜

### é—®é¢˜ä½ç½®
```cpp
// âŒ åŸå½¢å¼
os<<acc.Account_number<<" "<<"("<<acc.name<<")"<<":"<<endl<<"$"<<acc.balance;

// âœ… ä¿®æ­£
os << acc.Account_number << " (" << acc.name << "): $" << acc.balance;
```

### é—®é¢˜ç‚¹
1. **å­—ç¬¦ä¸²æ‹¼æ¥è¿‡å¤š**ï¼š`" "<<"("` åº”è¯¥ç›´æ¥ `" ("`
2. **ç¼ºå°‘ç©ºæ ¼**ï¼š`<<` ä¸¤è¾¹æ— ç©ºæ ¼
3. **ä¸åº”åŠ endl**ï¼šè¾“å‡ºè´¦æˆ·ä¿¡æ¯ä¸åº”è‡ªåŠ¨æ¢è¡Œï¼Œç”±è°ƒç”¨è€…å†³å®š

---

## 8. è‡ªå®šä¹‰å‡½æ•°check()é—®é¢˜

### é—®é¢˜ä½ç½®
```cpp
// âŒ åŸå½¢å¼
friend bool check(const Account &ldress, const Account &rdresss) {
    return ldress.Account_number == rdresss.Account_number;
}

// âœ… ä¿®æ­£
friend bool operator==(const Account& dress, const Account& other) {
    return dress.Account_number == other.Account_number;
}
```

### é—®é¢˜è¯´æ˜
- åº”è¯¥é‡è½½ `operator==` è€Œä¸æ˜¯è‡ªå®šä¹‰ `check()` å‡½æ•°
- å‚æ•°å `rdresss`ï¼ˆä¸‰ä¸ªsï¼‰çœ‹èµ·æ¥åƒæ‹¼å†™é”™è¯¯
- æ ‡å‡†åšæ³•æ˜¯ä½¿ç”¨è¿ç®—ç¬¦é‡è½½å®ç°ç›¸ç­‰æ€§æ¯”è¾ƒ

---

## 9. å¤šä½™çš„ææ„å‡½æ•°

### é—®é¢˜ä½ç½®
```cpp
// âŒ åŸå½¢å¼
~Account() {}

// âœ… ä¿®æ­£
// åˆ é™¤æˆ–ä½¿ç”¨ = default
~Account() = default;  // æˆ–ç›´æ¥åˆ é™¤è®©ç¼–è¯‘å™¨ç”Ÿæˆé»˜è®¤ç‰ˆæœ¬
```

### è¯´æ˜
- vector ä¼šè‡ªåŠ¨ç®¡ç†å†…å­˜ï¼Œç©ºææ„å‡½æ•°æ²¡æœ‰æ„ä¹‰
- å¦‚æœä¸éœ€è¦è‡ªå®šä¹‰ææ„é€»è¾‘ï¼Œåº”è¯¥åˆ é™¤æˆ–ä½¿ç”¨ `= default`

---

## 10. å‚æ•°å‘½åè§„èŒƒé—®é¢˜

### é—®é¢˜ä½ç½®
```cpp
// âŒ åŸå½¢å¼
friend Account operator+(Account ldress, double amount)
friend Account operator-(Account ldress, double amount)

// âœ… å»ºè®®
friend Account operator+(Account lhs, double amount)
friend Account operator-(Account rhs, double amount)
```

### è¯´æ˜
- `ldress` ä¸æ˜¯æ ‡å‡†ç¼©å†™ï¼Œå®¹æ˜“è¯¯è§£
- `lhs` = left-hand sideï¼ˆå·¦æ“ä½œæ•°ï¼‰
- `rhs` = right-hand sideï¼ˆå³æ“ä½œæ•°ï¼‰
- è¿™æ˜¯ä¸šç•Œé€šç”¨çº¦å®š

---

## æ€»ç»“è¡¨æ ¼

| ç±»åˆ« | é¢‘æ¬¡ | ä¸¥é‡æ€§ | å½±å“ |
|------|------|--------|------|
| ç©ºæ ¼è§„èŒƒ | 4 | ğŸŸ¡ ä¸­ | å¯è¯»æ€§ã€ä»£ç é£æ ¼ |
| å†—ä½™this-> | 3 | ğŸŸ¡ ä¸­ | ä»£ç æ¸…æ™°åº¦ |
| æ„é€ å‡½æ•°å†—ä½™è½¬æ¢ | 1 | ğŸŸ¡ ä¸­ | æ€§èƒ½ |
| æ‹·è´æ„é€ æ•ˆç‡ | 1 | ğŸŸ  é«˜ | æ€§èƒ½ã€constæˆå‘˜æ”¯æŒ |
| å‚æ•°æ— const | 1 | ğŸŸ  é«˜ | åŠŸèƒ½å®Œæ•´æ€§ |
| ç¼©è¿›ä¸è§„èŒƒ | 1 | ğŸŸ¡ ä¸­ | å¯è¯»æ€§ |
| operator<< æ ¼å¼ | 1 | ğŸŸ¡ ä¸­ | å¯è¯»æ€§ã€åŠŸèƒ½ |
| check() vs operator== | 1 | ğŸŸ  é«˜ | è®¾è®¡è§„èŒƒæ€§ |
| å¤šä½™ææ„å‡½æ•° | 1 | ğŸŸ¢ ä½ | ä»£ç å†—ä½™ |
| å‚æ•°å‘½å | 1 | ğŸŸ¢ ä½ | å¯è¯»æ€§ |

---

## å­¦ä¹ å»ºè®®

ä½œä¸ºåˆå­¦è€…ï¼Œé‡ç‚¹å…³æ³¨ï¼š
1. **ç©ºæ ¼å’Œç¼©è¿›** - æé«˜ä»£ç å¯è¯»æ€§
2. **åˆå§‹åŒ–åˆ—è¡¨** - æé«˜æ€§èƒ½å’ŒåŠŸèƒ½å®Œæ•´æ€§
3. **const é™å®šç¬¦** - æé«˜ä»£ç å®‰å…¨æ€§
4. **è¿ç®—ç¬¦é‡è½½** - å­¦ä¹ æ ‡å‡† C++ è®¾è®¡æ¨¡å¼

åšæŒè¿™äº›è§„èŒƒä¼šè®©ä½ å†™å‡ºæ›´ä¸“ä¸šçš„ C++ ä»£ç ï¼
